<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1">

<title>Embiggen</title>

<span id="edit"></span>

<script>
(function () {

const LOCAL_STORAGE_KEY = 'embiggen-initial-value';
const DEFAULT_VALUE = 'Edit me';

const editor = document.getElementById('edit');
const parent = document.body;

function zoom (value) {
	parent.style.transform = `scale(${value}, ${value})`;
}

function resize () {
	const editorWidth = editor.offsetWidth;
	const editorHeight = editor.offsetHeight;
	const documentWidth = parent.offsetWidth;
	const documentHeight = parent.offsetHeight;
	const zoomRatioWidth = documentWidth / editorWidth;
	const zoomRatioHeight = documentHeight / editorHeight;
	const zoomRatioMin = Math.min(zoomRatioWidth, zoomRatioHeight);
	zoom(zoomRatioMin);
}

function saveValue () {
	const value = editor.innerHTML;
	localStorage.setItem(LOCAL_STORAGE_KEY, value);
}

function loadValue () {
	const value = localStorage.getItem(LOCAL_STORAGE_KEY);
	editor.innerHTML = value || DEFAULT_VALUE;
}

editor.contentEditable = true;
editor.spellcheck = false;

editor.addEventListener('input', saveValue);
editor.addEventListener('input', resize);
window.addEventListener('resize', resize);
window.addEventListener('mousedown', () => {
	editor.focus();
});

document.addEventListener('DOMContentLoaded', () => {
	resize();
	editor.focus();
});

loadValue();

})();
</script>

<style>
html,
body {
	margin: 0;
	padding: 0;
	width: 100%;
	height: 100%;
	transform-origin: 0 0;
	font-size: 18px;
	overflow: hidden;
	cursor: text;
	line-height: 0.95em;
	font-family: Arial, sans-serif;
}

#edit {
	width: 100%;
	height: 100%;
	outline: none;
	transform-origin: 0 0;
}
</style>
